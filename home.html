<html>
  <head>
    <meta name="description" content="This is the home for protractor Firefox OS app">
  </head>
  <body>
    <img id="home-protractor" src="app/img/protractor_plain.svg" />
    <div id="installation-instructions"></div>
    <div id="install-button"</div>
  </body>

  <script type="text/javascript">
    // Install app
    if (navigator.mozApps) {
        var checkIfInstalled = navigator.mozApps.getSelf();
        checkIfInstalled.onsuccess = function () {
            if (checkIfInstalled.result) {
                // Already installed
                var installationInstructions = document.querySelector("#installation-instructions");
                if (installationInstructions) {
                    installationInstructions.style.display = "none";
                }
            }
            else {
                var install = document.querySelector("#install-button"),
                    manifestURL = location.href.substring(0, location.href.lastIndexOf("/")) + "/app/manifest.webapp";
                install.className = "show-install";
                install.onclick = function () {
                    var installApp = navigator.mozApps.install(manifestURL);
                    installApp.onsuccess = function(data) {
                        install.style.display = "none";
                    };
                    installApp.onerror = function() {
                        alert("Install failed\n\n:" + installApp.error.name);
                    };
                };
            }
        };
    }
    else {
        console.log("Open Web Apps not supported");
    }
  </script>
</html>
